<!-- 
        Created by: Jaime Estrada
        Modified by: Mar√≠a Mart√≠nez
        Date of creation: 05/06/2025
        Date of modification: 25/07/2025
        Description: Code nabvar
    -->

<!-- üîπ Top Navbar -->
<nav class="navbar navbar-expand-lg sticky-top py-2 shadow-navbar" style="justify-content: flex-start;">
  <div class="container-fluid px-3">
    <!-- home button-->
    

    <div
      class="collapse navbar-collapse d-flex  align-items-center"
      id="navbarOpciones"
      style="justify-content: flex-start;"
    >
      <ul class="navbar-nav mb-2 mb-lg-0 align-items-lg-center ms-auto" style="justify-content: flex-start;">
        {% if request.user.is_superuser %}
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Configuraci√≥n</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="{% url 'empresa_lista' %}"
                >Empresas</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'admin:auth_user_add' %}"
                >Usuarios</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'usuarios_demo' %}"
                >Usuarios Demo</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'reporte_auditoria' %}"
                >Auditor√≠a</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'respaldo_empresa_excel' %}"
                >BackUp</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'reiniciar_sistema' %}"
                >Reiniciar Sistema</a
              >
            </li>
          </ul>
        </li>
        {% endif %}

          <ul class="navbar-nav mb-2 mb-lg-0 align-items-lg-center" style="margin-right: 300px;">
            <li class="nav-item">
              <a href="{% url 'bienvenida' %}" class="nav-link d-flex align-items-center" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Inicio">
                <i class="bi bi-house-door-fill me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Clientes">
                <i class="bi bi-people-fill me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'crear_cliente' %}">Nuevo Cliente</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_clientes' %}">Lista</a></li>
                <li><a class="dropdown-item" href="{% url 'clientes_inactivos' %}">Inactivos</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Propiedades">
                <i class="bi bi-building me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'crear_local' %}">Nueva Propiedad</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_locales' %}">Lista Propiedades</a></li>
                <li><a class="dropdown-item" href="{% url 'locales_inactivos' %}">Inactivas</a></li>
                <li><a class="dropdown-item" href="{% url 'incrementar_c_locales' %}">Incrementar Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'carga_masiva_locales' %}">Carga Masiva</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="√Åreas Comunes">
                <i class="bi bi-tree-fill me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'crear_area' %}">Nueva √Årea</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_areas' %}">Lista</a></li>
                <li><a class="dropdown-item" href="{% url 'areas_inactivas' %}">Inactivos</a></li>
                <li><a class="dropdown-item" href="{% url 'incrementar_c_areas' %}">Incrementar Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'carga_masiva_areas' %}">Carga Masiva</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Ingresos Cuotas">
                <i class="bi bi-cash-coin me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'crear_factura' %}">Registrar Cuota</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_facturas' %}">Lista Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'facturar_mes' %}">Carga Mensual Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'pagos_por_origen' %}?tipo=local">Reporte Cobros Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'dashboard_pagos' %}">Dashboard</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Otros Ingresos">
                <i class="bi bi-coin me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'crear_factura_otros_ingresos' %}">Registrar otra Cuota</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_facturas_otros_ingresos' %}">Lista otras Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'reporte_cobros_otros_ingresos' %}">Reporte Cobros otras Cuotas</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Cartera Adeudos">
                <i class="bi bi-wallet2 me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'cartera_vencida' %}">Cartera Vencida</a></li>
                <li><a class="dropdown-item" href="{% url 'carga_masiva_facturas' %}">Carga Cartera</a></li>
                <li><a class="dropdown-item" href="{% url 'dashboard_saldos' %}">Dashboard</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Cat√°logos">
                <i class="bi bi-journal-bookmark-fill me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'proveedor_lista' %}">Proveedores</a></li>
                <li><a class="dropdown-item" href="{% url 'empleado_lista' %}">Empleados</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="{% url 'tipo_gasto_crear'%}">Alta tipo gasto</a></li>
                <li><a class="dropdown-item" href="{% url 'tipos_gasto_lista'%}">Lista tipo gasto</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Gastos">
                <i class="bi bi-wallet me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'gasto_nuevo' %}">Registrar Gasto</a></li>
                <li><a class="dropdown-item" href="{% url 'gastos_lista' %}">Lista Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'reporte_pagos_gastos' %}">Reporte Pagos Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'dashboard_pagos_gastos' %}">Dashboard</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Caja Chica">
               <i class="bi bi-cash me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'lista_fondeos' %}">Lista Fondeos</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_gastos_caja_chica' %}">Lista Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'lista_vales_caja_chica' %}">Lista Vales</a></li>
                <li><a class="dropdown-item" href="{% url 'fondeo_caja_chica' %}">Fondear Caja Chica</a></li>
                <li><a class="dropdown-item" href="{% url 'registrar_gasto_caja_chica' %}">Registro de Gasto</a></li>
                <li><a class="dropdown-item" href="{% url 'generar_vale_caja' %}">Registro de Vales</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Presupuestos">
                <i class="bi bi-bar-chart-fill me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'matriz_presupuesto'%}">Matriz Presupuesto Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'matriz_presupuesto_ingresos' %}">Matriz Presupuesto Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'carga_masiva_presupuestos' %}">Carga Presupuesto Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'carga_masiva_presupuesto_ingresos' %}">Carga Presupuesto Cuotas</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Reportes">
                <i class="bi bi-graph-up-arrow me-2" style="font-size: 2.2rem;"></i>
                <span></span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'estado_resultados' %}">Estado Resultados</a></li>
                <li><a class="dropdown-item" href="{% url 'reporte_presupuesto_vs_gasto' %}">Comparativo Ppto vs Gastos</a></li>
                <li><a class="dropdown-item" href="{% url 'reporte_presupuesto_vs_ingreso' %}">Comparativo Ppto vs Cuotas</a></li>
                <li><a class="dropdown-item" href="{% url 'reporte_ingresos_vs_gastos' %}">Dashboard Cuotas y Gastos</a></li>
              </ul>
            </li>
          </ul>
          

      <div class="d-flex align-items-center gap-3 ms-auto">
        <!-- Help Button -->
        <button
          type="button"
          class="btn btn-outline-secondary btn-sm d-flex align-items-center gap-1"
          data-bs-toggle="modal"
          data-bs-target="#modalAyuda"
          aria-label="Abrir ayuda"
        >
          <i class="bi bi-question-circle-fill" style="font-size: 2.2rem;" title="Ayuda"></i>
          <span></span>
        </button>

        <!-- Logout button -->
        <form method="post" action="{% url 'logout' %}" class="mb-0">
          {% csrf_token %}
          <button type="submit" class="btn btn-primary btn-sm">
            <i class="bi bi-box-arrow-right me-1" style="font-size: 2.2rem;" title="Salir"></i>
          </button>
        </form>
      </div>
    </div>
  </div>
  <!-- Dark button -->
  <div class="d-flex align-items-center ms-auto">
    <button id="toggleDark" class="toggle-switch">
      <div class="toggle-ball">
        <i class="bi bi-moon-fill"></i>
      </div>
    </button>
  </div>
</nav>

<!-- Modal Ayuda -->
<div
  class="modal fade"
  id="modalAyuda"
  tabindex="-1"
  aria-labelledby="modalAyudaLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalAyudaLabel">Ayuda</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Cerrar"
        ></button>
      </div>
      <div class="modal-body">
        <h5 class="mb-3">Manual de Operaci√≥n del Sistema GESAC</h5>
        <div class="accordion" id="ayudaAccordion">
          <!-- Inicio de Sesi√≥n -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingLogin">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseLogin"
                aria-expanded="true"
                aria-controls="collapseLogin"
              >
                Inicio de Sesi√≥n
              </button>
            </h2>
            <div
              id="collapseLogin"
              class="accordion-collapse collapse show"
              aria-labelledby="headingLogin"
              data-bs-parent="#ayudaAccordion"
            >
              <div class="accordion-body">
                <ol>
                  <li>
                    Ingresa tu usuario y contrase√±a en la pantalla principal.
                  </li>
                  <li>Haz clic en <b>Iniciar sesi√≥n</b>.</li>
                  <li>Si los datos son correctos, acceder√°s al sistema.</li>
                  <li>
                    Si olvidaste tu contrase√±a, contacta al administrador.
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <!-- Men√∫ Principal -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingMenu">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseMenu"
                aria-expanded="false"
                aria-controls="collapseMenu"
              >
                Men√∫ Principal
              </button>
            </h2>
            <div
              id="collapseMenu"
              class="accordion-collapse collapse"
              aria-labelledby="headingMenu"
              data-bs-parent="#ayudaAccordion"
            >
              <div class="accordion-body">
                <ul>
                  <li>
                    <b>Clientes:</b> Registra nuevos clientes, consulta la lista
                    y administra su informaci√≥n.
                  </li>
                  <li>
                    <b>Locales:</b> Da de alta nuevos locales, consulta la
                    lista, administra e incrementa las cuotas de mantenimiento
                    por porcentaje de forma automatica.
                  </li>
                  <li>
                    <b>√Åreas Comunes:</b> Administra las √°reas comunes, crea
                    nuevas y consulta las existentes, administra e incrementa
                    las cuotas de areas por porcentaje de forma automatica.
                  </li>
                  <li>
                    <b>Cuotas:</b> Registra cuotas de mantenimiento y √°reas ,
                    consulta el historial, registra la cobranza de las cuotas,
                    genera la carga mensual automatica de las cuotas, visualiza
                    la cobranza de las cuotas mediante un reporte, e incluye un
                    <strong>DASHBOARD</strong> que grafica las cuentas por
                    cobrar, el presupuesto y la cobranza de las cuotas
                  </li>
                  <li>
                    <b>Otras Cuotas:</b>Registra ingresos adicionales distintos
                    a las cuotas regulares, puedes crear nuevos tipos de otros
                    ingresos como: Servicios(recuperacion de servicios),
                    Intereses por inversiones, Por cobro de estacionamiento, ya
                    sea operado o rentado, por cobro de sanitarios etc... cuenta
                    con sus propios reportes de otros ingresos y reporte de su
                    cobranza.
                  </li>
                  <li>
                    <b>Cartera Vencida:</b> Consulta adeudos pendientes de
                    cuotas de mantenimiento, √°reas comunes y otros ingresos por
                    periodos de vencimiento (30, 60, 90 ....dias), cuenta con un
                    reporte detallado de la cobranza, asi como un
                    <strong>DASHBOARD</strong> que grafica los diferentes
                    par√°metros de la cartera vencida.
                  </li>
                  <li>
                    <b>Cat√°logos:</b> Registra proveedores, empleados y crea
                    nuevos tipos de gasto de acuerdo al usuario y sus
                    necesidades. Los tipos de gasto se crean en base a un
                    catalogo de Grupo de Gastos y Subgrupos ya definido y
                    precargado en el sistema, usted puede consultar dichos
                    catalogos en la opcion
                    <strong>Alta tipo de gasto, opcion subgrupos</strong> dentro
                    del menu <strong>Cat√°logos</strong>, ahi usted podra
                    consultar los diferentes Grupo de gasto y a partir de ahi el
                    usuario podra crear nuevos tipos de gasto por ejemplo:
                    <strong
                      >Gastos Nomina/Sueldos/Sueldo Gerente Operativo</strong
                    >, donde <strong>"Gastos Nomina/Sueldos"</strong> ya esta
                    predefinida por el sistema y la parte que el usurio puede
                    crear como tipo de gasto es
                    <strong>Sueldo Gerente Operativo</strong>., a partir de ahi
                    con el tipo de gasto creado, el usuario podra registrar
                    gastos en base a este nuevo tipo de gasto.
                  </li>
                  <li>
                    <b>Gastos:</b> Registra y consulta solicitudes de gastos,
                    registra el pago de gastos solicitados y consulta los pagos
                    mediante un reporte, asi mismo cuenta con un
                    <strong>DASHBOARD</strong> que visualiza los pagos
                    realizados, el presupuesto y los pagos pendientes (cxp).
                  </li>
                  <li>
                    <b>Presupuesto:</b> Administra presupuestos de ingresos y
                    egresos, edita y guarda los cambios, cuenta con la opcion de
                    cerrar el presupuesto: hace que el presupuesto no pueda ser
                    editado, opcion clonar presupuesto: clona el presupuesto
                    actual y lo traspasa al siguiente periodo anual. Los
                    presupuesto pueden crearse manualmente o mediante carga
                    masiva.
                  </li>
                  <li>
                    <b>Reportes:</b> Estado de Resultados, con dos opciones de
                    vizualizacion en base a Flujo y en base a Resultados,
                    Reporte comparativo de Gastos vs Presupuesto, con opciones
                    de vizualizacion por periodos, Reporte comparativo de
                    Ingresos vs Presupuesto, con opciones de vizualizacion por
                    periodos, y un <strong>DASHBOARD</strong> que grafica los
                    resultados financieros por periodos.
                  </li>
                  <li>
                    <b>Calendario Eventos:</b> Permite visualizar y gestionar
                    eventos importantes relacionados con el presupuesto y la
                    cobranza de cuotas, facilitando la planificaci√≥n y el
                    seguimiento de actividades clave, como juntas de comit√©,
                    juntas de asamblea, etc. Una vez registrado el evento, el
                    usuario podr√° enviar por correo la invitaci√≥n.
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Ayuda -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingAyuda">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseAyuda"
                aria-expanded="false"
                aria-controls="collapseAyuda"
              >
                Ayuda
              </button>
            </h2>
            <div
              id="collapseAyuda"
              class="accordion-collapse collapse"
              aria-labelledby="headingAyuda"
              data-bs-parent="#ayudaAccordion"
            >
              <div class="accordion-body">
                <ul>
                  <li>
                    Haz clic en el bot√≥n <b>Ayuda</b> para consultar este manual
                    en cualquier momento.
                  </li>
                  <li>
                    Si tienes dudas adicionales, contacta al administrador del
                    sistema.
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Cerrar Sesi√≥n -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingLogout">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseLogout"
                aria-expanded="false"
                aria-controls="collapseLogout"
              >
                Cerrar Sesi√≥n
              </button>
            </h2>
            <div
              id="collapseLogout"
              class="accordion-collapse collapse"
              aria-labelledby="headingLogout"
              data-bs-parent="#ayudaAccordion"
            >
              <div class="accordion-body">
                <ol>
                  <li>
                    Haz clic en el bot√≥n <b>Salir</b> ubicado en la parte
                    superior derecha.
                  </li>
                  <li>Tu sesi√≥n se cerrar√° de forma segura.</li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <a href="https://paginaweb-ro9v.onrender.com/gestor_condominal" target="_blank"
          ><p class="mt-3">
            Link VIDEO Tutorial.
          </p></a
        >
      </div>
      <div class="modal-footer">
        {% if not es_demo %}
        <button id="cancelar-suscripcion-btn" class="btn btn-danger">
          Cancelar Suscripci√≥n
        </button>
        {% endif %}
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
      </div>
    </div>
  </div>
</div>
